{% extends "base_bootstrap.html" %}
<html lang="en">
<head>
    {% block head %}
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, Chrome=1">
    <title>COVID-19 В УКРАЇНІ - Infogram</title>

    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>

    <!-- fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,500,700,400i,500i,700i%7CRaleway:400,500,600,700,400i,500i,600i,700i&amp;subset=latin,latin-ext,cyrillic" media="all">

    <style>
    #tooltiptext {
      visibility: hidden;
      width: auto;
      background-color: rgba(100,100,100,0.8);
      color: #fff;
      text-align: center;
      border-radius: 6px;
      padding: 5px 5px;
      position: absolute;
      left: 100px;
      top: 200px;
      z-index: 1;
    }

    th {
        background-color: rgb(238, 238, 238);
        color: rgb(51, 51, 51);
        font-size: 19px;
        font-weight: 700;
        font-family: Roboto, sans-serif;
        background-position: initial initial;
        background-repeat: initial initial;
    }
    td {
        font-size: 19px;
    }
    td span {
        font-family: Roboto, sans-serif;
    }
    </style>

    {% endblock %}
</head>
{% block content %}
<body>
    <div>
        <span id="tooltiptext">Region name</span>
        <svg width="834" height="440">
            {% for region in map %}
            <path
                comment="{{ region.region.region }}"
                stroke="#ffffff"
                stroke-opacity="NaN"
                stroke-width="1"
                stroke-linecap="round"
                stroke-linejoin="round"
                fill="rgb(249, {{ region.cases.color }}, {{ region.cases.color }})"
                d="{{ region.data }}"
            ></path>
            {% endfor %}
        </svg>
    </div>

<h2>Випадків сьогодні: <b>{{ util.1.value }}</b></h2>
<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>
                <span>Область</span>
            </th>
            <th>
                <span>Населення</span>
            </th>
            <th>
                <span>Виявлено</span>
            </th>
            <th>
                <span>Випадків на {{ util.2.value }} людей</span>
            </th>
        </tr>
    </thead>
    <tbody>
        {% for i in cases %}
        <tr>
            <td><span>{{ i.region.region }}</td>
            <td><span>{{ i.region.population }}</td>
            <td><span>{{ i.cases }}</td>
            <td><span>{{ i.indx }}</td>
        {% endfor %}
    </tbody>
</table>

<h5 class="text-right">Станом на <b>{{ util.0.value }}</b></h5>

<script>
$( 'path' ).on( "click", function( event ) {
    $( "#tooltiptext" ).css( 'left', event.pageX);
    $( "#tooltiptext" ).css( 'top', event.pageY+10);
    $( '#tooltiptext' ).css( "visibility", 'visible' );
    $( '#tooltiptext' ).text( $( this ).attr('comment') );
});
$( "path" ).hover(
    function() {
    color = $( this ).attr( "fill");
    var region = $( this ).attr( "id" );
    $( this ).attr( "fill", "rgb(170,170,170)");
    $( this ).attr( "stroke", "#666");
}, function() {
    $( this ).attr( "stroke", "#fff");
    $( this ).attr( "fill", color);
    $( '#tooltiptext' ).css( "visibility", 'hidden' );
  });
</script>


</body>
{% endblock %}
</html>
